# InduSpect AI - 智慧巡檢系統使用手冊

歡迎使用 InduSpect AI，這是一個旨在將傳統工業巡檢流程轉變為自動化、數據驅動的智慧系統。本手冊將引導您了解系統的所有功能、基本原理以及詳細的使用方法。

## 專案願景

本專案的核心目標是利用先進的多模態 AI 技術，賦能現場巡檢人員，簡化數據採集流程，並利用 AI 自動分析視覺數據，最終生成富有洞察力的報告，以顯著提高工業巡檢的效率、準確性與安全性。
測試12345678
---

## 核心功能

InduSpect AI 整合了多項強大功能，形成一個無縫的智慧巡檢工作流：

1.  **AI 驅動的清單提取**：從一張定檢表照片自動識別並生成數位化的巡檢任務清單。
2.  **引導式照片拍攝**：結構化的介面引導使用者依序為每個巡檢點拍攝照片。
3.  **完整的離線支援**：在沒有網路的環境下也能完成照片拍攝，所有進度都會安全地儲存在本機，連線後即可開始分析。
4.  **先進的 AI 圖像分析**：由 Google Gemini 驅動，能自動識別設備類型、讀取儀表數值、評估設備狀況並判斷是否存在異常。
5.  **雙模式尺寸測量**：
    *   **AI 自動估算**：當照片中包含標準參照物（如信用卡）時，AI 會自動估算異常特徵的真實尺寸。
    *   **互動式手動測量**：提供一個精準的 2D 測量工具，讓使用者可以手動校準或測量任何物體的尺寸。
6.  **人在迴路中的審查與覆寫**：所有 AI 的分析結果都可以在一個直觀的介面中進行審查、修改和確認，確保最終數據的絕對準確。
7.  **集中式檢測記錄**：所有經確認的巡檢結果都會被整理到一個清晰的表格中，便於追蹤和存檔。
8.  **一鍵生成主管級報告**：根據所有已確認的記錄，AI 能自動撰寫一份專業、簡潔的高階主管級摘要報告。
9.  **單張快速分析模式**：無需預先建立檢查清單，可直接對單張照片進行即時分析，並將結果儲存至檢測記錄中，適合臨時性或非計畫性的檢查任務。

---

## 基本原理概念 (How It Works)

InduSpect AI 的智慧能力主要基於以下幾個核心技術概念：

*   **多模態 AI (Multi-Modal AI)**：系統的核心是 Google Gemini，這是一個強大的多模態 AI 模型，意味著它不僅能理解文字指令，更能「看懂」並深入分析您上傳的圖像內容。
*   **思維鏈提示工程 (Chain-of-Thought Prompting)**：我們不只是簡單地問 AI「這張圖是什麼？」。而是透過一種名為「思維鏈」的技術，引導 AI 進行一步步的邏輯推理——「首先，描述你看到的場景。然後，識別主要的設備。接著，讀取儀表上的數字...」。這種結構化的指令能大幅提升 AI 分析的準確性和穩定性。
*   **結構化數據輸出 (Structured Data - JSON)**：我們強制要求 AI 必須以一個嚴格的 JSON 格式回傳其分析結果。這確保了無論 AI 的文字描述如何，其核心數據（如設備類型、讀數）都能被應用程式準確無誤地解析和顯示。
*   **離線優先架構 (Offline-First)**：應用程式在設計之初就考慮到了真實工業環境中網路不穩定的挑戰。透過瀏覽器的 `localStorage` 技術，您的所有操作和拍攝的照片都會被即時儲存，確保數據安全並提供流暢、不中斷的操作體驗。

---

## 使用方法 (Step-by-Step User Guide)

請依照以下步驟完成一次完整的智慧巡檢流程。

### 步驟 1: 上傳定檢表

1.  在應用程式首頁，您會看到「步驟 1: 上傳您的定檢表」。
2.  點擊「**選擇定檢表照片**」按鈕。
3.  拍攝或選擇一張包含所有巡檢項目的紙本定檢表照片。
4.  上傳後，AI 會自動分析圖片，提取所有需要檢查的項目，並生成一份數位化的檢查清單。完成後，應用程式會自動進入下一個步驟。

### 步驟 2: 拍攝巡檢照片

1.  進入「步驟 2: 拍攝巡檢照片」介面後，您會看到由上一步生成的任務清單。
2.  當前需要拍攝的項目會被高亮顯示。點擊對應的「**拍攝照片**」按鈕，使用相機對準指定的設備進行拍攝。
3.  拍攝完成後，照片預覽會出現在該項目旁邊，狀態會更新為「已完成」，同時介面會自動聚焦到下一個待拍攝項目。
4.  **(離線操作)** 即使您的裝置沒有網路連線，您也可以完成此步驟下的所有照片拍攝。所有照片都會被安全保存。
5.  當所有項目的照片都拍攝完畢後，點擊頁面底部的「**開始分析所有項目**」按鈕。
    *   *注意：點擊此按鈕需要網路連線。*

### 步驟 3: 分析與審核結果

1.  點擊分析按鈕後，應用程式會將所有照片上傳至雲端，交由 AI 進行分析。分析完成後，您會進入「步驟 3: 分析與審核結果」介面。
2.  每張照片的分析結果會以一張獨立的「審核卡片」呈現。您可以在這裡看到 AI 識別出的所有資訊。
3.  **審查與修改**：卡片上的所有欄位都是**可編輯的**。您可以點擊任何欄位（如設備類型、儀表讀數、狀況評估等）來修改 AI 的結果。
4.  **使用尺寸測量工具**：
    *   **AI 自動估算**：如果您的照片中恰好包含一張信用卡，且 AI 識別到了需要測量的異常（如裂縫），「測量尺寸」欄位可能會被自動填充。
    *   **手動精準測量**：
        1.  點擊卡片底部的「**手動測量尺寸**」按鈕，彈出測量工具。
        2.  **第一步 (設定比例尺)**：在照片中的**已知尺寸物體**（如信用卡）上拖曳畫出第一條線，然後在控制欄中輸入它的實際長度（例如 `85.6`）和單位（例如 `mm`），點擊「確認參考」。
        3.  **第二步 (測量目標)**：在您**想要測量**的物體（如裂縫）上拖曳畫出第二條線。
        4.  **第三步 (儲存)**：點擊「**完成並儲存**」。系統會根據您設定的比例尺自動計算出目標的真實尺寸，並將結果填回審核卡片的「測量尺寸」欄位。
5.  **確認記錄**：當您對某個項目的分析結果感到滿意後，點擊該卡片右下角的「**確認記錄**」按鈕。該項目會從待審核列表中移除，並被移動到下方的「檢測記錄」表格中。
6.  您也可以點擊頁面上方的「**一鍵記錄所有已完成項目**」來批量確認所有分析成功的項目。

### 步驟 4: 檢視記錄與生成報告

1.  所有被確認的項目都會出現在「**檢測記錄**」表格中，這裡彙總了本次巡檢所有最終的數據。
2.  當您確認完所有需要記錄的項目後，捲動到頁面底部的「**巡檢總結報告**」區塊。
3.  點擊「**產生總結報告**」按鈕。
4.  AI 會根據「檢測記錄」中的所有數據，自動為您撰寫一份包含總體概述、關鍵問題和結論的主管級摘要報告。報告會直接顯示在頁面上，供您複製或參考。

---

### 附錄: 快速分析模式 (Quick Analysis Mode)

此模式適用於您需要對單一、非預定項目進行快速評估的場景。

1.  在應用程式首頁，點擊「**試試單張照片快速分析**」按鈕。
2.  您將進入快速分析模式。點擊「**從檔案上傳**」或「**立即拍攝**」來提供您要分析的照片。
3.  照片上傳後，AI 會立即進行分析。
4.  分析結果會直接顯示在一個可編輯的「審核卡片」中，操作方式與主流程中的「步驟 3: 分析與審核結果」完全相同。您可以在此修改數據或使用手動測量工具。
5.  當您對結果滿意後，點擊卡片底部的「**儲存此記錄**」按鈕。
6.  該筆分析結果將被加入到頁面下方的「檢測記錄」表格中，並可被納入最終的「巡檢總結報告」。
7.  儲存後，您可以選擇「**分析另一張照片**」或「**返回主流程**」。

---

## 技術棧

### 📱 Flutter 移動應用版本（當前主要開發版本）

*   **框架**: Flutter 3.x (iOS/Android 雙平台支援)
*   **語言**: Dart 3.2+
*   **核心 AI**: Google Gemini API (`gemini-2.0-flash-exp` 用於圖像分析)
*   **狀態管理**: Provider 模式
*   **本地儲存**: SharedPreferences (未來規劃 SQLite)
*   **圖片處理**: image_picker, camera, image

**專案位置**: `flutter_app/`
**開發分支**: `claude/convert-to-mobile-app-011CUm7vyz4NEct62sVZPhPG`
**詳細文檔**: [Flutter App README](flutter_app/README.md)
**功能規劃**: [ROADMAP.md](ROADMAP.md)

### 🌐 Web 原型版本（已完成，供參考）

*   **前端框架**: React.js with TypeScript
*   **核心 AI**: Google Gemini API (`gemini-2.5-flash`, `gemini-2.5-pro`)
*   **本機儲存**: 瀏覽器 `localStorage` API

### 🔮 未來規劃架構 (詳見 `arch.md`)

*   **後端**: Google Cloud Platform (GCP) 無伺服器架構
  - Cloud Run 微服務
  - Firebase Authentication / Supabase Auth
  - Cloud Storage / Supabase Storage
  - Firestore / Supabase (PostgreSQL)
*   **團隊協作**: 雲端同步、多裝置支援、權限管理
*   **企業功能**: 資料加密、稽核日誌、合規性支援

---

## 📱 快速開始 - Flutter 移動版

```bash
# 1. 進入 Flutter 專案目錄
cd flutter_app

# 2. 安裝依賴
flutter pub get

# 3. 配置 API Key
cp .env.example .env
# 編輯 .env 添加您的 Gemini API Key

# 4. 運行應用
flutter run

# 5. 構建發布版本
flutter build apk --release  # Android
flutter build ios --release  # iOS (需 macOS)
```

詳細安裝與配置說明請參考 [Flutter App README](flutter_app/README.md)

---

## 🗺️ 專案文檔導覽

| 文檔 | 說明 |
|------|------|
| [README.md](README.md) | 本文件 - 專案總覽與使用手冊 |
| [flutter_app/README.md](flutter_app/README.md) | Flutter 移動應用技術文檔 |
| [ROADMAP.md](ROADMAP.md) | **功能規劃藍圖** - 未來發展方向 |
| [aimodel.md](aimodel.md) | AI 模型整合與 Prompt 工程規範 |
| [arch.md](arch.md) | 系統架構設計（後端規劃） |
| [ui.md](ui.md) | UI/UX 設計規範 |
| [prj.md](prj.md) | 專案管理與開發流程 |
| [todo.md](todo.md) | 開發與部署路線圖 |
| [feature_enhancements.md](feature_enhancements.md) | 功能增強策略（準確度優化） |