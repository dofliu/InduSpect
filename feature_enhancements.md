# 功能增強計畫：提升準確度與空間感知

本文件旨在規劃與記錄一系列功能增強，核心目標是提升 AI 影像分析的準確度，並賦予系統對真實世界尺寸的感知能力。

## 1. 提升影像辨識準確度策略 (Strategies to Improve Image Recognition Accuracy)

為提升 Gemini 模型的辨識準確度，我們將從「優化輸入品質」和「精進指令清晰度」兩方面著手。

### A. 優化拍攝流程與指引 (UI/UX)

引導使用者拍出「AI 友善」的高品質照片是提升分析準確度的第一步。

-   **疊加參考框 (Overlay Guides):** 未來版本中，可在相機畫面上針對不同巡檢項目顯示不同的疊加圖層（如圓形框對準儀表），引導使用者將目標置於畫面中央。
-   **即時品質檢查 (On-Device Pre-checks):** 考慮在客戶端進行輕量級的即時檢查，如模糊偵測和亮度檢查，並即時給予使用者回饋。
-   **教學提示 (User Education):** 在 UI 中加入簡潔的「拍攝秘訣」，提醒使用者拍攝要點。

### B. 精進提示工程 (Prompt Engineering)

提示詞是與 AI 溝通的語言，使其更精確，結果就會更準確。

-   **思維鏈提示 (Chain-of-Thought Prompting):** (已實施) 在提示詞中，引導模型進行「逐步思考」。要求 AI 先描述場景，再識別設備，然後讀取數據，接著評估狀況，最後才綜合判斷。這能引導模型進行更有條理的分析，減少疏漏。
-   **少樣本提示 (Few-shot Prompting):** 未來可考慮在提示中加入一至兩個「成功案例」的範例（如一張範例圖及其理想的 JSON 輸出），幫助 AI 更快地理解我們的期望格式與內容細節。

### C. 建立回饋機制 (Human-in-the-Loop Feedback)

系統現有的「審查與覆寫 (F-007)」功能是寶貴的數據來源。

-   **數據收集:** 當使用者修改 AI 的分析結果時，應同時記錄「AI 的原始輸出」和「使用者的修改後結果」。
-   **持續改進:** 這些成對的數據是未來進行模型微調 (fine-tuning) 或優化提示詞最有價值的資產。

## 2. 判斷實際尺寸的方法 (Methods for Determining Real-World Dimensions)

核心挑戰是在 2D 圖像中判斷真實世界的尺寸。我們必須為 AI 提供一個「比例尺」。

### A. 方案一：AI 自動估算 (已實施)

此方案利用 AI 自動識別圖像中的標準參照物，並以此為基礎估算目標物體的尺寸。

-   **流程：**
    1.  **定義參照物：** AI 模型已被訓練識別標準信用卡（寬度 85.6mm）作為比例尺。
    2.  **AI 提示詞更新:** 分析提示詞已更新，指令 AI 在分析時主動尋找信用卡。若找到，則以此為比例尺測量圖像中的主要異常特徵（如裂縫）。
    3.  **自動化輸出:** 測量結果會自動填入分析結果的 `dimensions` 欄位。

### B. 方案二：互動式 2D 測量工具 (已實施)

由於在網頁應用中實現真 3D AR 功能的限制，我們開發了一個高效的 2D 互動測量工具，作為一個更務實且精準的替代方案。

-   **流程:**
    1.  **使用者觸發:** 在審核介面，使用者可點擊「手動測量尺寸」按鈕啟動工具。
    2.  **手動設定比例尺:** 使用者在圖像中的任一已知尺寸物體上畫線，並輸入其實際長度與單位。
    3.  **測量目標:** 接著，使用者在欲測量的目標物體上畫第二條線。
    4.  **即時計算:** 系統會根據使用者設定的比例尺，立即計算並顯示目標的真實尺寸。
    5.  **結果回填:** 計算結果會被填入分析結果的 `dimensions` 欄位，使用者可進一步確認或修改。

## 3. 實施路線圖 (Implementation Roadmap)

-   **步驟 1 (已完成):** 在核心分析提示中整合「思維鏈」(Chain-of-Thought) 邏輯，強化 AI 分析的穩定性與準確性。
-   **步驟 2 (已完成):** 實施「方案一：AI 自動估算」與「方案二：互動式 2D 測量工具」進行尺寸測量。
-   **步驟 3 (未來規劃):** 在相機介面疊加參考框，進一步引導使用者拍出高品質照片。
